library(roxygen2)
roxygen2::roxygenise()
temp <- readRDS("temp")
temp
typeof(temp)
class(temp)
temp <- as.data.frame(temp)
temp$colony <- 1:5
temp$colony <- paste0("18-", as.character(14, 59, 33, 52, 60))
temp$colony
temp$colony <- paste0("18-", as.character(c(14, 59, 33, 52, 60)))
temp$colony
temp <- rename(N1 = group1, N2 = group2, removed_1 = r1, removed_2 = r2, marked_1 = m1, marked_2 = m2)
library(dplyr)
temp <- rename(N1 = group1, N2 = group2, removed_1 = r1, removed_2 = r2, marked_1 = m1, marked_2 = m2)
temp <- rename(temp, N1 = group1, N2 = group2, removed_1 = r1, removed_2 = r2, marked_1 = m1, marked_2 = m2)
temp
temp <- select(temp, -Nk, -Np)
temp
temp <- rename(temp, removed_total = n)
temp
ant_removal <- temp
usethis::use_data(ant_removal)
roxygen2::roxygenise()
roxygen2::roxygenise()
antremoval <- temp
usethis::use_data(antremoval)
roxygen2::roxygenise()
devtools::load_all()
data(overwintering)
ant_removal
temp <- readRDS("coef_interval_permutation")
temp <- readRDS("coeff_interval_permutation")
for (i in 1:length(temp)){
temp[i] <- c(temp[i], list(colony = ant_removal$colony[i]))}
temp[1]
temp[1] <- c(temp[1])
temp[2] <- c(temp[1], list(a = 1))
c(temp[2], list(a = 1))
str(c(temp[2], list(a = 1)))
temp <- readRDS("coeff_interval_permutation")
for (i in 1:length(temp)){
temp[i] <- list(temp[[i]], a = 1)}
for (i in 1:length(temp)){
temp[i] <- list(list(temp[[i]], a = 1))}
str(temp)
temp <- readRDS("coeff_interval_permutation")
for (i in 1:length(temp)){
str(temp[[1]])
str(temp[1])
for (i in 1:length(temp)){
str(c(temp[[1]], list(a=1)))
for (i in 1:length(temp)){
temp[[i]] <- c(temp[[i]], list(colony = ant_removal$colony[i]))}
str(temp)
permutated_slopes <- temp
usethis::use_data(permutated_slopes)
roxygen2::roxygenise()
temp<- readRDS("cum_summary")
head(temp)
library(dplyr)
temp <- select(temp, -Group1, -Group2, -m1, -m2)
temp$Colony <- as.factor(temp$Colony, levels = ant_removal$colony)
temp$Colony <- factor(temp$Colony, levels = ant_removal$colony)
head(temp)
factor(temp$Colony, levels = ant_removal$colony)
temp<- readRDS("cum_summary")
temp <- select(temp, -Group1, -Group2, -m1, -m2)
temp$Colony <- as.factor(temp$Colony)
levels(temp$Colony) <- ant_removal$colony
head(temp)
colnames(temp)[7]
colnames(temp)[9]
colnames(temp)[13]
colnames(temp)[12]
colnames(temp)[11]
colnames(temp)[11] <- "Upper_part_dead"
colnames(temp)[12] <- "Lower_part_dead"
colnames(temp)[10] <- "Lower_part"
colnames(temp)[9] <- "Upper_part"
head(temp)
experiment_course <- temp
usethis::use_data(experiment_course)
roxygen2::roxygenise()
install.packages("Hmisc")
library(Hmisc)
binconf
temp <- sample(1:10, 100, replace = TRUE)
temp
my_hist <- hist(temp)
mt_hist
my_hist
library(stringi)
?stri_flatten
?stri_dup
stri_dup("abc", 5)
stri_dup(c("abc", "def"), 5,2)
stri_dup(c("abc", "def"), c(5,2))
?stri_length
mat <- matrix(1:12, nrow=3)
df = as.data.frame(mat)
format(df[1,])
type(format(df[1,]))
typeof(format(df[1,]))
class(format(df[1,]))
(format(as.matrix(df[1,])))
devtools::load_all()
head(ant_removal)
?dhyper
list(ant_removal[1,])
as.list(ant_removal[1,])
str(as.list(ant_removal[1,]))
str(as.list(unlist(ant_removal[1,])))
str((ant_removal[1,])))
str((ant_removal[1,]))
str(as.list(ant_removal[1,]))
ant_removal
experiment_course
head(experiment_course)
ant_removal
head(experiment_course)
head(experiment_course)
df <- as.data.frame(matrix(1:12, nrow=3))
df
df %>% mutate(V1 = V1*3, V5 = V1)
df %>% mutate(V1 = V1*3, V5 = V1)
library(dplyr)
df %>% mutate(V1 = V1*3, V5 = V1)
library(purrr)
?pmap_dfr
head(experiment_course)
experiment_course <- rename(experiment_course, Removed_1 = Upper_part, Removed_2 = Lower_part)
usethis::use_data(experiment_course)
usethis::use_data(experiment_course, overwrite = TRUE)
experiment_course <- rename(experiment_course, removed_1 = Upper_part, removed_2 = Lower_part)
experiment_course <- rename(experiment_course, removed_1 = Removed_1, removed_2 = Removed_2)
usethis::use_data(experiment_course, overwrite = TRUE)
colnames(experiment_course)
df
fun <- (V1, V3) return(a = V1+5, b = V3^2)
fun <- function(V1, V3) return(a = V1+5, b = V3^2)
pmap_dfr(df, name <- function(variables) {
})
pmap_dfr(df, fun)
pmap_dfr(df, fun, ... )
fun <- function(V1, V3, ...) return(a = V1+5, b = V3^2)
pmap_dfr(df, fun)
fun <- function(V1, V3, ...) return(c(a = V1+5, b = V3^2))
pmap_dfr(df, fun)
df
devtools::load_all()
null_distribution_CI
devtools::load_all()
temp <- overwintering::track_CI_change()
ant_removal
colnames(experiment_course)
experiment_course <- rename(experiment_course, colony = Colony)
usethis::use_data(experiment_course)
usethis::use_data(experiment_course, overwrite= TRUE)
devtools::load_all()
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
ant_removal$N1
ant_removal
typeof(ant_removal)
ant_removal <- as.data.frame(ant_removal)
typeof(ant_removal)
ant_removal$N1
ant_removal
class(ant_removal)
ant_removal[,1]
class(ant_removal[,1])
class(ant_removal[,2])
ant_removal[,2]
ant_removal[1,]
ant_removal[1,2]
as.matrix(ant_removal)
as.data.frame(as.matrix(ant_removal))
as.data.frame(as.matrix(ant_removal))[,1]
is.numeric(as.data.frame(as.matrix(ant_removal))[,1])
(as.data.frame(as.matrix(ant_removal))[,1])
(as.matrix(ant_removal))[,1]
(as.matrix(ant_removal))
dim(as.matrix(ant_removal))
dim(as.matrix(ant_removal))[1,2]
(as.matrix(ant_removal))[1,2]
(as.matrix(ant_removal))[,2]
class(as.matrix(ant_removal))
temp <- (as.matrix(ant_removal))
temp
class(matrix[,1])
class(temp[,1])
temp <- apply(temp,2,unlist)\
temp <- apply(temp,2,unlist)
temp <- as.data.frame(temp)
temp
temp[,1]
temp <- ant_removal
temp <- as.matrix(ant_removal)
temp[,1:7] <- apply(temp[,1:7], 2, function(x) as.numeric(as.character(x)))
temp[,2]
temp[,1:7] <- apply(temp[,1:7], 2, function(x) as.numeric(as.character(unlist(x))))
temp[,2]
str(temp)
temp <- temp[,1:7]
temp
temp[,2]
temp <- as.matrix(temp)
temp[,2]
dim(temp)
dim(temp)[2]
temp2 <- dim(temp)
temp <- matrix(temp)
temp
dim(temp) <- temp2
temp
temp <- as.data.frame(temp)
temp3 <- cbind(temp, ant_removal$colony)
temp3
temp3[,8]
temp3[,7]
temp[,6]
temp <- matrix(temp)
class(temp)
type(temp)
mode(temp)
typeof(temp)
temp
temp <- ant_temoval[,1:7]
temp <- ant_removal[,1:7]
temp
matrix(temp)
as.matrix(temp)
temp <- as.matrix(temp)
temp[,3]
str(temp)
as.numeric(temp)
temp <- matrix(as.numeric(temp))
dim(temp) <- temp2
temp
temp <- as.data.frame(temp)
temp
temp3 <- cbind(temp, unlist(ant_removal$colony))
temp3
temp3[,5]
temp3[,8]
colnames(temp3) <- colnames(ant_removal)
temp3
ant_removal <- temp3
usethis::use_data(ant_removal)
usethis::use_data(ant_removal, overwrite = TRUE)
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
colnames(experiment_course)
devtools::load_all()
temp <- overwintering::track_CI_change()
colnames(experiment_course)
devtools::load_all()
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
l
m
ml
r
N1
N2
n
devtools::load_all()
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
rlang::last_error()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
head(data)
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
rlang::last_error()
342.3*0.01
342.3*0.005
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
colnames(experiment_course)
experiment_course$removed_total <- experiment_course$Unmarked + experiment_course$removed_1 + experiment_course$removed_2
usethis::use_data(experiment_course)
usethis::use_data(experiment_course, overwrite = TRUE)
devtools::load_all()
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
rlang::last_error()
devtools::load_all()
temp <- overwintering::track_CI_change()
temp
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
x = c(a= 1, b =2)
y = c(name1 = x['a'], name2 = x['b'])
y
x['a']
as.numeric(x['a'])
devtools::load_all()
devtools::load_all()
temp <- overwintering::track_CI_change()
temp
experiment_course[1,]
temp[1,]
temp[4,]
temp[40,]
devtools::load_all()
temp <- overwintering::track_CI_change()
temp[1,]
temp[4,]
which.max(c(1,1))
which.max(c(1,1,1))
which.max(c(1))
devtools::load_all()
temp <- overwintering::track_CI_change()
temp[1,]
Inf > 3
which.max(c(1,1,Inf))
which.max(c(1,1,NULL))
devtools::load_all()
temp <- overwintering::track_CI_change(data = experiment_course[1,])
devtools::load_all()
temp <- overwintering::track_CI_change()
temp
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
filter(temp, colony =="18-33")
devtools::load_all()
temp <- overwintering::track_CI_change()
filter(temp, colony =="18-33")
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
?overwintering::hgeom_numbers
?hgeom_numbers
roxygen2::roxygenise()
?overwintering::hgeom_numbers
?grep
roxygen2::roxygenise()
?overwintering::hgeom_numbers
ant_removal[1,]
as.list(ant_removal[1,])
runif
runif(20)
overwintering::figure_5()
devtools::load_all()
overwintering::figure_5()
usethis::use_test(calculate_CI())
usethis::use_test(calculate_CI)
devtools::test()
track_CI_change() %>%
ggplot(aes(x = Date)) +
geom_ribbon(aes(ymin = lower_limit, ymax = upper_limit, fill = CI), alpha = 0.5) +
scale_fill_manual("Confidence interval", labels = c("Eprical data", "Null model"), values = c('#8d7500','#341202')) +
geom_line(aes(y = max_likelihood_val, color = CI), lwd=1) +
scale_color_manual("Maximum likelihood", labels = c("Eprical data", "Null model"), values = c('#8d7500','#341202')) +
facet_grid(.~colony, scales = "free_x") +
ylab("Proportion of ants from the\nupper nest segment")
figure_5 <- function(){
library(ggplot2)
library(dplyr)
track_CI_change() %>%
ggplot(aes(x = Date)) +
geom_ribbon(aes(ymin = lower_limit, ymax = upper_limit, fill = CI), alpha = 0.5) +
scale_fill_manual("Confidence interval", labels = c("Eprical data", "Null model"), values = c('#8d7500','#341202')) +
geom_line(aes(y = max_likelihood_val, color = CI), lwd=1) +
scale_color_manual("Maximum likelihood", labels = c("Eprical data", "Null model"), values = c('#8d7500','#341202')) +
facet_grid(.~colony, scales = "free_x") +
ylab("Proportion of ants from the\nupper nest segment")
}
expect_equal(calculate_CI(x), c(r = 20, l = 2))
library(testthat)
expect_equal
library(testthat)
library(testthat)
library(overwintering)
test_check("overwintering")
test_that("Caclulate_ID works correctly",{
x <- cumsum(rep(1, 20))
x <- x/sum(x)
expect_equal(calculate_CI(x), c(r = 20, l = 2))
})
usethis::use_test("calculate_CI")
test_that("Caclulate_ID works correctly",{
x <- cumsum(rep(1, 20))
x <- x/sum(x)
expect_equal(calculate_CI(x), c(r = 20, l = 2))
})
overwintering
overwintering::calculate_CI
devtools::load_all()
rm(figure_5())
rm(figure_5)
devtools::load_all()
devtools::test()
devtools::test()
devtools::test()
sum(c(0.1, rep(0.01,80))) == 0.9
sum(c(0.1, rep(0.01,85))) == 0.95
sum(c(0.1, rep(0.01,84))) == 0.95
sum(c(0.1, rep(0.01,85)))
sum(c(0.1, rep(0.01,85))) == 0.95
(round(sum(c(0.1, rep(0.01,85)))),3) == 0.95
(round(sum(c(0.1, rep(0.01,85))),3)) == 0.95
devtools::load_all()
devtools::test()
devtools::test()
usethis::use_package("dplyr")
usethis::use_package("purrr")
dplyr::%>%
dplyr::'%>%'
library(dplyr)
df <- ad.data.frame(matrix(1:12, nrow=3))
df <- as.data.frame(matrix(1:12, nrow=3))
df dplyr::'%>%' select(V1)
160/24
roxygen2::roxygenise()
usethis::use_package("dplyr")
devtools::check()
devtools::load_all()
overwintering::calculate_CI
devtools::check()
devtools::check()
devtools::uses_testthat()
devtools::use_testthat()
usethis::use_testthat()
usethis::use_test("Main functions.R")
usethis::use_test("Main_functions.R")
devtools::check()
devtools::check()
devtools::check()
usethis::use_test("Main_functions.R")
devtools::check()
devtools::load_all()
data(package="overwintering")
data(experiment_course, package="overwintering")
View(experiment_course)
data(ant_removal, package="overwintering")
View(ant_removal)
View(ant_removal)
roxygen2::roxygenise()
roxygen2::roxygenise()
devtools::load_all()
?overwintering::hgeom_numbers
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::hgeom_numbers
