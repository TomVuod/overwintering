dim(as.matrix(ant_removal))
dim(as.matrix(ant_removal))[1,2]
(as.matrix(ant_removal))[1,2]
(as.matrix(ant_removal))[,2]
class(as.matrix(ant_removal))
temp <- (as.matrix(ant_removal))
temp
class(matrix[,1])
class(temp[,1])
temp <- apply(temp,2,unlist)\
temp <- apply(temp,2,unlist)
temp <- as.data.frame(temp)
temp
temp[,1]
temp <- ant_removal
temp <- as.matrix(ant_removal)
temp[,1:7] <- apply(temp[,1:7], 2, function(x) as.numeric(as.character(x)))
temp[,2]
temp[,1:7] <- apply(temp[,1:7], 2, function(x) as.numeric(as.character(unlist(x))))
temp[,2]
str(temp)
temp <- temp[,1:7]
temp
temp[,2]
temp <- as.matrix(temp)
temp[,2]
dim(temp)
dim(temp)[2]
temp2 <- dim(temp)
temp <- matrix(temp)
temp
dim(temp) <- temp2
temp
temp <- as.data.frame(temp)
temp3 <- cbind(temp, ant_removal$colony)
temp3
temp3[,8]
temp3[,7]
temp[,6]
temp <- matrix(temp)
class(temp)
type(temp)
mode(temp)
typeof(temp)
temp
temp <- ant_temoval[,1:7]
temp <- ant_removal[,1:7]
temp
matrix(temp)
as.matrix(temp)
temp <- as.matrix(temp)
temp[,3]
str(temp)
as.numeric(temp)
temp <- matrix(as.numeric(temp))
dim(temp) <- temp2
temp
temp <- as.data.frame(temp)
temp
temp3 <- cbind(temp, unlist(ant_removal$colony))
temp3
temp3[,5]
temp3[,8]
colnames(temp3) <- colnames(ant_removal)
temp3
ant_removal <- temp3
usethis::use_data(ant_removal)
usethis::use_data(ant_removal, overwrite = TRUE)
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
colnames(experiment_course)
devtools::load_all()
temp <- overwintering::track_CI_change()
colnames(experiment_course)
devtools::load_all()
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
l
m
ml
r
N1
N2
n
devtools::load_all()
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
rlang::last_error()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
head(data)
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
rlang::last_error()
342.3*0.01
342.3*0.005
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
debugonce(overwintering::track_CI_change)
overwintering::track_CI_change()
devtools::load_all()
overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
colnames(experiment_course)
experiment_course$removed_total <- experiment_course$Unmarked + experiment_course$removed_1 + experiment_course$removed_2
usethis::use_data(experiment_course)
usethis::use_data(experiment_course, overwrite = TRUE)
devtools::load_all()
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
rlang::last_error()
devtools::load_all()
temp <- overwintering::track_CI_change()
temp
devtools::load_all()
temp <- overwintering::track_CI_change()
devtools::load_all()
temp <- overwintering::track_CI_change()
x = c(a= 1, b =2)
y = c(name1 = x['a'], name2 = x['b'])
y
x['a']
as.numeric(x['a'])
devtools::load_all()
devtools::load_all()
temp <- overwintering::track_CI_change()
temp
experiment_course[1,]
temp[1,]
temp[4,]
temp[40,]
devtools::load_all()
temp <- overwintering::track_CI_change()
temp[1,]
temp[4,]
which.max(c(1,1))
which.max(c(1,1,1))
which.max(c(1))
devtools::load_all()
temp <- overwintering::track_CI_change()
temp[1,]
Inf > 3
which.max(c(1,1,Inf))
which.max(c(1,1,NULL))
devtools::load_all()
temp <- overwintering::track_CI_change(data = experiment_course[1,])
devtools::load_all()
temp <- overwintering::track_CI_change()
temp
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
filter(temp, colony =="18-33")
devtools::load_all()
temp <- overwintering::track_CI_change()
filter(temp, colony =="18-33")
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
figure_5()
devtools::load_all()
?overwintering::hgeom_numbers
?hgeom_numbers
roxygen2::roxygenise()
?overwintering::hgeom_numbers
?grep
roxygen2::roxygenise()
?overwintering::hgeom_numbers
ant_removal[1,]
as.list(ant_removal[1,])
runif
runif(20)
overwintering::figure_5()
devtools::load_all()
overwintering::figure_5()
usethis::use_test(calculate_CI())
usethis::use_test(calculate_CI)
devtools::test()
track_CI_change() %>%
ggplot(aes(x = Date)) +
geom_ribbon(aes(ymin = lower_limit, ymax = upper_limit, fill = CI), alpha = 0.5) +
scale_fill_manual("Confidence interval", labels = c("Eprical data", "Null model"), values = c('#8d7500','#341202')) +
geom_line(aes(y = max_likelihood_val, color = CI), lwd=1) +
scale_color_manual("Maximum likelihood", labels = c("Eprical data", "Null model"), values = c('#8d7500','#341202')) +
facet_grid(.~colony, scales = "free_x") +
ylab("Proportion of ants from the\nupper nest segment")
figure_5 <- function(){
library(ggplot2)
library(dplyr)
track_CI_change() %>%
ggplot(aes(x = Date)) +
geom_ribbon(aes(ymin = lower_limit, ymax = upper_limit, fill = CI), alpha = 0.5) +
scale_fill_manual("Confidence interval", labels = c("Eprical data", "Null model"), values = c('#8d7500','#341202')) +
geom_line(aes(y = max_likelihood_val, color = CI), lwd=1) +
scale_color_manual("Maximum likelihood", labels = c("Eprical data", "Null model"), values = c('#8d7500','#341202')) +
facet_grid(.~colony, scales = "free_x") +
ylab("Proportion of ants from the\nupper nest segment")
}
expect_equal(calculate_CI(x), c(r = 20, l = 2))
library(testthat)
expect_equal
library(testthat)
library(testthat)
library(overwintering)
test_check("overwintering")
test_that("Caclulate_ID works correctly",{
x <- cumsum(rep(1, 20))
x <- x/sum(x)
expect_equal(calculate_CI(x), c(r = 20, l = 2))
})
usethis::use_test("calculate_CI")
test_that("Caclulate_ID works correctly",{
x <- cumsum(rep(1, 20))
x <- x/sum(x)
expect_equal(calculate_CI(x), c(r = 20, l = 2))
})
overwintering
overwintering::calculate_CI
devtools::load_all()
rm(figure_5())
rm(figure_5)
devtools::load_all()
devtools::test()
devtools::test()
devtools::test()
sum(c(0.1, rep(0.01,80))) == 0.9
sum(c(0.1, rep(0.01,85))) == 0.95
sum(c(0.1, rep(0.01,84))) == 0.95
sum(c(0.1, rep(0.01,85)))
sum(c(0.1, rep(0.01,85))) == 0.95
(round(sum(c(0.1, rep(0.01,85)))),3) == 0.95
(round(sum(c(0.1, rep(0.01,85))),3)) == 0.95
devtools::load_all()
devtools::test()
devtools::test()
<<<<<<< HEAD
usethis::use_package("dplyr")
usethis::use_package("purrr")
dplyr::%>%
dplyr::'%>%'
library(dplyr)
df <- ad.data.frame(matrix(1:12, nrow=3))
df <- as.data.frame(matrix(1:12, nrow=3))
df dplyr::'%>%' select(V1)
160/24
roxygen2::roxygenise()
usethis::use_package("dplyr")
devtools::check()
devtools::load_all()
overwintering::calculate_CI
devtools::check()
devtools::check()
devtools::uses_testthat()
devtools::use_testthat()
usethis::use_testthat()
usethis::use_test("Main functions.R")
usethis::use_test("Main_functions.R")
devtools::check()
devtools::check()
devtools::check()
usethis::use_test("Main_functions.R")
devtools::check()
devtools::load_all()
data(package="overwintering")
data(experiment_course, package="overwintering")
View(experiment_course)
data(ant_removal, package="overwintering")
View(ant_removal)
View(ant_removal)
roxygen2::roxygenise()
roxygen2::roxygenise()
devtools::load_all()
?overwintering::hgeom_numbers
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::track_CI_change
roxygen2::roxygenise()
?overwintering::hgeom_numbers
=======
getwd()
ls("package:base")
grep("^file.*$",ls("package:base"))
grep("^file.*$",ls("package:base"), value = TRUE)
grep("^dir.*$",ls("package:base"), value = TRUE)
dir.create("temp")
file("temp/tempfile")
conn <- file("temp/tempfile")
close(conn)
system.file("tempfile")
system.file("tempfile", package = "overwintering")
system.file("data.R")
load_all()
devtools::load_all()
system.file("data.R")
system.file("data.R", package = "overwintering")
ScalarReal()
>>>>>>> eb37558 (documentation corrections)
rmultinom(10,1, rep(0.2,5))
sQuote("Data")
sQuote(Data)
paste0(sQuote("Data"), "abs")
x ,y <-1
x <- y <-1
y
x
?range
?findInterval
?outer
outer(1:3, c(10,20))
x <- seq(1,3, length.out = 30)
x
x2 <- seq(1,30, length.out = 30)
x1 <- c(3,6,8)
x2 <- seq(1,30, length.out = 300)
findInterval(x1,x2)
x2[findInterval(x1,x2)]
x1
df <- data.frame(x = 4, yfoobarbaz = 5)
df$y
?mapply
?lapply(list, function)
?lapply
c(1,2,3) %>% do.call(abs, .)
library(dplyr)
c(1,2,3) %>% do.call(abs, .)
list(1,2,3) %>% do.call(abs, .)
list(1,2,3) %>% do.call(abs, .x)
list(1,2,3) %>% do.call(abs, .)
do.call(abs, list(1,2,3))
do.call(function(x) x*2, list(1,2,3))
list(1,2,3)
do.call(abs, as.list(c(1,2,3)))
devtools::load_all()
roxygen2::roxygenise()
devtools::load_all()
head(experiment_course)
head(summary_data)
colnames(ant_removal)
colnames(experiment_course)
library(dplyr)
experiment_course <- select(experiment_course, -removed_total)
usethis::use_data(experiment_course)
usethis::use_data(experiment_course, overwrite = TRUE)
?mapply
fun <- function(x , y) x+y
mapply(fun, 1:10, 5)
mapply(fun, 1:10, 1)
fun <- function(x, ... , y) x+y
mapply(fun, 1:10, 11:20, y=1)
mapply(fun, 1:10, 11:20, y=5)
devtools::load_all()
devtools::load_all()
do.call(get_prob_mass, as.list(unlist(ant_removal[1,]))))
do.call(get_prob_mass, as.list(unlist(ant_removal[1,])))
colnames(experiment_course)
experiment_course <- rename(experiment_course, unmarked = Unmared)
experiment_course <- rename(experiment_course, unmarked = Unmarked)
colnames(ant_removal)
usethis::use_data(experiment_course, overwrite = TRUE)
devtools::load_all()
do.call(get_prob_mass, as.list(unlist(ant_removal[1,])))
colnames(experiment_course)
colnames(ant_removal)
do.call(get_prob_mass, as.list(unlist(experiment_course[1,])))
dataset <- dplyr::left_join(experiment_course,
select(ant_removal, colony, N1, N2))
do.call(get_prob_mass, as.list(unlist(experiment_course[1,])))
do.call(get_prob_mass, as.list(unlist(dataset[1,])))
as.list(unlist(dataset[1,]))
colnames(ant_removal)
dataset <- dplyr::left_join(experiment_course,
select(ant_removal, colony, N1, N2, marked_1, marked_2))
do.call(get_prob_mass, as.list(unlist(dataset[1,])))
devtools::load_all()
do.call(get_prob_mass, as.list(unlist(dataset[1,])))
do.call(get_prob_mass, as.list(unlist(dataset[1:10,])))
do.call(get_prob_mass, as.list(unlist(dataset[2,])))
track_CI_change()
devtools::load_all()
track_CI_change()
debugonce(track_CI_change)
track_CI_change()
track_CI_change()
debugonce(track_CI_change)
track_CI_change()
head(data)
head(dataset)
list(head(dataset))
as.list(head(dataset))
temp <- as.list(head(dataset))
mapply(get_prob_mass, temp)
temp$removed_2
mapply(get_prob_mass, temp)
temp <- select(temp, removed_1, removed_2, unmarked, marked_1, marked_2,
N1, N2, everything())
temp <- as.data.frame(temp)
temp
temp <- select(temp, removed_1, removed_2, unmarked, marked_1, marked_2,
N1, N2, everything())
temp
mapply(get_prob_mass, temp)
mapply(get_prob_mass, as.list(temp))
mapply(get_prob_mass, temp[1,])
mapply(get_prob_mass, temp[1,1], temp[1,2])
do.call(mapply(get_prob_mass, as.list(temp)))
do.call(mapply, c(get_prob_mass, as.list(temp)))
temp2 <- do.call(mapply, c(get_prob_mass, as.list(temp)))
temp2[1,2]
temp2 <- do.call(mapply, c(get_prob_mass, as.list(temp), simplify = FALSE))
temp2
?do.call
temp2 <- do.call(mapply, c(get_prob_mass, as.list(temp[1,])))
temp2
temp2 <- as.list(do.call(mapply, c(get_prob_mass, as.list(temp), simplify = FALSE))_
temp2 <- as.list(do.call(mapply, c(get_prob_mass, as.list(temp), simplify = FALSE)))
temp2
is.list(temp2)
temp2 <- (do.call(mapply, c(get_prob_mass, as.list(temp), simplify = FALSE))
)
is.list(temp2)
lapply(calculate_CI, temp2)
lapply(temp2, calculate_CI, alpha = 0.05)
lapply(as.data.frame(temp2), calculate_CI, alpha = 0.05)
as.data.frame(temp2)
do.call(get_prob_mass, as.list(unlist(dataset[2,])))
library(purrr)
?pmap
pmap(get_prob_mass, dataset)
pmap(dataset, get_prob_mass)
devtools::load_all()
track_CI_change()
devtools::load_all()
track_CI_change()
devtools::load_all()
track_CI_change()
figure5()
figure_5()
debugonce(track_CI_change)
track_CI_change()
colnames(data)
colnames(data)
data[nrow(data),]
temp3 <- do.call(get_prob_mass, as.list(data[nrow(data),]))
temp3
calculate_CI(temp3, alpha = 0.05)
temp4 <- do.call(get_prob_mass, c(as.list(data[nrow(data),]), null_model = TRUE))
calculate_CI(temp4, alpha = 0.05)
temp4
sum(temp4$prob)
sum(temp4$prob[-1])
sum(temp4$prob[1:34])
sum(temp4$prob[1:30])
sum(temp4$prob[1:20])
sum(temp4$prob[1:15])
devtools::load_all()
track_CI_change()
figure_5()
devtools::test()
usethis::use_test("removal_experiment.R")
0.9/100*6
0.9/100*5
roxygen2::roxygenise()
figure_5()
